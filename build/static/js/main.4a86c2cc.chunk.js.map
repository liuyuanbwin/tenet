{"version":3,"sources":["pages/404.tsx","config/index.ts","utils/index.ts","pages/Login/Login.tsx","utils/string.js","utils/date.js","components/CreateLinkmanModal/index.js","components/CreateCarModal/index.js","pages/Home/components/createBillModal.tsx","routes/config.ts","pages/Home/Home.tsx","pages/Schedule.tsx","routes/index.tsx","layout/index.tsx","App.tsx","serviceWorker.js","index.tsx"],"names":["NoFoundPage","status","title","subTitle","extra","config","envId","require","storageBaseUrl","app","cloudbase","init","env","db","database","auth","persistence","bills","collection","cars","linkmans","corporates","loginState","Promise","resolve","reject","getLoginState","then","catch","err","emailLogin","email","password","signInWithEmailAndPassword","res","createCar","query","add","getMatchCar","reg","treg","R","RegExp","regexp","options","where","no","get","getMatchLinkman","name","createLinkman","getCorporates","getBills","console","log","data","a","tempbills","i","length","bill","doc","car_id","car_info","templinkmans","j","linkman_ids","tempLinkman","push","getCarInfo","Login","history","useHistory","onFinish","values","state","className","initialValues","remember","Item","rules","required","message","prefix","UserOutlined","placeholder","LockOutlined","type","valuePropName","noStyle","href","htmlType","billTypes","index","vehicleType","billTypeTitle","filter","item","dateStr","date","moment","format","onClose","useForm","form","width","visible","wrapClassName","okText","cancelText","onOk","validateFields","result","id","success","labelCol","span","wrapperCol","label","onChange","value","setFieldsValue","sex","Option","key","useState","matchlinkmans","setMatchlinkmans","setCreateLinkman","useEffect","map","linkman","tel","initData","onHandleCreateCar","onLinkmansChange","allowClear","mode","optionLabelProp","filterOption","inputValue","option","indexOf","_id","JSON","stringify","onClick","CreateLinkmanModal","Step","CreateBillModal","props","step","setStep","carOptions","setCarOptions","linkmanOptions","setLinkmanOptions","car","setCar","setLinkman","billInfo","setBillInfo","setCorporates","setCreateCar","onHandleCarSearch","e","String","brand","model","onHandleLinkmanSearch","onCancel","footer","current","icon","SolutionOutlined","LoadingOutlined","SmileOutlined","dropdownMatchSelectWidth","style","onSelect","onSearch","Search","size","enterButton","CreateCarModal","column","layout","disabled","temp","submit","tempBillInfo","create_date","Date","expire_date","insurancebrand_id","corporate","price","valid_date","appRoutes","path","component","setLogState","createBillModalVisible","setCreateBillModalVisible","bs","setBs","billDetailVisible","setBillDetailVisible","detailItem","setDetailItem","tstate","getState","fetchBill","columns","dataIndex","render","text","record","types","DetailItme","typeTitle","linkmanName","linkmanTel","bordered","onBack","rowKey","dataSource","maskClosable","closable","menu","RenderRoutes","route","exact","strict","Sider","Header","Content","Footer","MainLayout","menus","year","getFullYear","height","src","padding","display","flexDirection","flex","background","overflow","children","textAlign","App","Boolean","window","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4a86c2cc.chunk.js","sourcesContent":["import { Result } from 'antd'\r\nimport React from 'react'\r\n\r\nexport const NoFoundPage: React.FC<{}> = () => (\r\n  <Result\r\n    status=\"404\"\r\n    title=\"404\"\r\n    subTitle=\"Sorry, the page you visited does not exist.\"\r\n    extra={<span>Back Home</span>}\r\n  />\r\n)\r\n\r\n","/* eslint-disable */\r\nconst cloudbaseConfig = require('../../cloudbaserc')\r\n\r\nexport const config = {\r\n  envId: cloudbaseConfig.envId,\r\n  storageBaseUrl: ''\r\n}\r\n","/* eslint-disable @typescript-eslint/prefer-for-of */\r\nimport { config } from '@/config'\r\nimport cloudbase from '@cloudbase/js-sdk'\r\n\r\nconst app = cloudbase.init({\r\n\tenv: config.envId\r\n})\r\nconst db = app.database()\r\nconst auth = app.auth({ persistence: 'local' })\r\nconst bills = db.collection('bills') // 订单列表\r\nconst cars = db.collection('cars') // 车辆列表\r\nconst linkmans = db.collection('linkmans') // 联系人列表\r\nconst corporates = db.collection('corporates') // 保险公司列表\r\n\r\n// 获取登录状态\r\nconst loginState = () => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tauth\r\n\t\t\t.getLoginState()\r\n\t\t\t.then((loginState) => {\r\n\t\t\t\tif (loginState) {\r\n\t\t\t\t\t// 登录态有效\r\n\t\t\t\t\tresolve(true)\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 没有登录态，或者登录态已经失效\r\n\t\t\t\t\tresolve(false)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err)\r\n\t\t\t})\r\n\t})\r\n}\r\n\r\n// 邮箱登录\r\nconst emailLogin = (email: string, password: string) => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tauth\r\n\t\t\t.signInWithEmailAndPassword(email, password)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err)\r\n\t\t\t})\r\n\t})\r\n}\r\n// 新建车辆\r\nconst createCar = (query: any): Promise<any> => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tcars\r\n\t\t\t.add({ ...query })\r\n\t\t\t.then((res) => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err)\r\n\t\t\t})\r\n\t})\r\n}\r\n// 获取车辆列表\r\nconst getCars = (query: any): Promise<any> => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tcars\r\n\t\t\t.where(query)\r\n\t\t\t.get()\r\n\t\t\t.then((res) => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err)\r\n\t\t\t})\r\n\t})\r\n}\r\n// 模糊搜索车辆\r\nconst getMatchCar = (reg: string): Promise<any> => {\r\n\tconst R = db.RegExp as any\r\n\tlet treg = new R({ regexp: `${reg}`, options: 'i' })\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tcars\r\n\t\t\t.where({\r\n\t\t\t\tno: treg // /88/i // treg // /`${reg}`/ // new db.RegExp({ regexp: `/${reg}/`, options: 'i' })\r\n\t\t\t})\r\n\t\t\t.get()\r\n\t\t\t.then((res) => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t\t.catch((err) => reject(err))\r\n\t})\r\n}\r\n// 模糊搜索联系人\r\nconst getMatchLinkman = (reg: string): Promise<any> => {\r\n\tif (reg === '') {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlinkmans\r\n\t\t\t\t.get()\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tresolve(res)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => reject(err))\r\n\t\t})\r\n\t}\r\n\tconst R = db.RegExp as any\r\n\tlet treg = new R({ regexp: `${reg}`, options: 'i' })\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlinkmans\r\n\t\t\t.where({ name: treg })\r\n\t\t\t.get()\r\n\t\t\t.then((res) => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t\t.catch((err) => reject(err))\r\n\t})\r\n}\r\n// 新建联系人\r\nconst createLinkman = (query: any): Promise<any> => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlinkmans\r\n\t\t\t.add({\r\n\t\t\t\t...query\r\n\t\t\t})\r\n\t\t\t.then((res) => resolve(res))\r\n\t\t\t.catch((err) => reject(err))\r\n\t})\r\n}\r\n// 获取联系人列表\r\nconst getLinkmans = (query: any): Promise<any> => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlinkmans\r\n\t\t\t.where(query)\r\n\t\t\t.get()\r\n\t\t\t.then((res) => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err)\r\n\t\t\t})\r\n\t})\r\n}\r\n\r\nconst getCorporates = (query: any): Promise<any> => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tcorporates\r\n\t\t\t.where(query)\r\n\t\t\t.get()\r\n\t\t\t.then((res) => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err)\r\n\t\t\t})\r\n\t})\r\n}\r\n// 新建订单\r\nconst createBill = (query: any): Promise<any> => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tbills\r\n\t\t\t.add({ ...query })\r\n\t\t\t.then((res) => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err)\r\n\t\t\t})\r\n\t})\r\n}\r\n\r\n// 获取订单列表\r\nconst getBills = (query: any): Promise<any> => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tbills\r\n\t\t\t.where(query)\r\n\t\t\t.get()\r\n\t\t\t.then((res) => {\r\n\t\t\t\tconsole.log('%cindex.ts line:84 res', 'color: #26bfa5;', res)\r\n\t\t\t\tif (res.data) {\r\n\t\t\t\t\tconst getCarInfo = async () => {\r\n\t\t\t\t\t\tlet tempbills = []\r\n\t\t\t\t\t\tfor (let i = 0; i < res.data.length; i++) {\r\n\t\t\t\t\t\t\tlet bill = res.data[i]\r\n\t\t\t\t\t\t\tlet car_info = await cars.doc(bill.car_id).get()\r\n\t\t\t\t\t\t\tconsole.log('%cindex.ts line:105 car_info', 'color: #26bfa5;', car_info)\r\n\t\t\t\t\t\t\tif (car_info.data && car_info.data.length) {\r\n\t\t\t\t\t\t\t\tbill.car_info = car_info.data[0]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet templinkmans = []\r\n\t\t\t\t\t\t\tfor (let j = 0; j < bill.linkman_ids.length; j++) {\r\n\t\t\t\t\t\t\t\tlet tempLinkman = await linkmans.doc(bill.linkman_ids[j]).get()\r\n\t\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\t'%cindex.ts line:115 tempLinkman',\r\n\t\t\t\t\t\t\t\t\t'color: white; background-color: #26bfa5;',\r\n\t\t\t\t\t\t\t\t\ttempLinkman\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\tif (tempLinkman.data && tempLinkman.data.length) {\r\n\t\t\t\t\t\t\t\t\ttemplinkmans.push(tempLinkman.data[0])\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbill.linkmans = templinkmans\r\n\t\t\t\t\t\t\ttempbills.push(bill)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresolve(tempbills)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgetCarInfo()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolve(res)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\treject(err)\r\n\t\t\t})\r\n\t})\r\n}\r\n\r\nexport {\r\n\tapp,\r\n\temailLogin,\r\n\tloginState,\r\n\tgetBills,\r\n\tgetMatchCar,\r\n\tgetMatchLinkman,\r\n\tgetCorporates,\r\n\tcreateBill,\r\n\tcreateCar,\r\n\tcreateLinkman\r\n}\r\n","import React from 'react'\r\nimport { useHistory } from 'react-router'\r\nimport { Button, Card, Form, Input, Checkbox } from 'antd'\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons'\r\nimport { emailLogin, loginState } from '@/utils/index'\r\nimport './login.less'\r\n\r\ninterface LoginResult {\r\n\tLoginState:object\r\n}\r\n\r\nexport const Login: React.FC<{}> = () => {\r\n\tconst history = useHistory()\r\n\tconst onFinish = async (values: any) => {\r\n\t\tawait emailLogin('119077905@qq.com', 'wolaile1986A')\r\n\t\tlet state = await loginState()\r\n\t\tconsole.log('%cLogin.tsx line:17 state', 'color: #26bfa5;', state);\r\n\t\tif(state){\r\n\t\t\thistory.push('/')\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"login-container\">\r\n\t\t\t<Card className=\"login-card-container\">\r\n\t\t\t\t<Form name=\"normal_login\" className=\"login-form\" initialValues={{ remember: true }} onFinish={onFinish}>\r\n\t\t\t\t\t<Form.Item name=\"username\" rules={[{ required: true, message: 'Please input your Username!' }]}>\r\n\t\t\t\t\t\t<Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item name=\"password\" rules={[{ required: true, message: 'Please input your Password!' }]}>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tprefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t<Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n\t\t\t\t\t\t\t<Checkbox>记住密码</Checkbox>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<a className=\"login-form-forgot\" href=\"\">\r\n\t\t\t\t\t\t\t忘记密码\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n\t\t\t\t\t\t\t登录\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\tOr <a href=\"\">注册账号!</a>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</Card>\r\n\t\t</div>\r\n\t)\r\n}\r\n","const billTypes = [\r\n\t{ index: 1, type: 'check_car', title: '验车' },\r\n\t{ index: 2, type: 'commercial_insurance', title: '商业保险' },\r\n\t{ index: 3, type: 'force_insurance', title: '交强险' }\r\n]\r\n\r\nconst vehicleType = [\r\n\t{ index: 1, type: 'under5', title: '5座以下客车' },\r\n\t{ index: 2, type: 'beyond5', title: '5座以上客车' },\r\n\t{ index: 3, type: 'trunk', title: '卡车' },\r\n\t{ index: 4, type: 'other', title: '其他' }\r\n]\r\n\r\nconst billTypeTitle = (type) => {\r\n\tlet types = billTypes.filter((item) => item.type == type)\r\n\treturn types[0]\r\n}\r\n\r\nexport { billTypes, vehicleType, billTypeTitle }\r\n","import moment from 'moment'\r\n\r\nconst dateFormat = 'YYYY-MM-DD HH:mm:ss'\r\n\r\nconst dateStr = (date) => {\r\n\treturn moment(date).format(dateFormat)\r\n}\r\n\r\nexport { dateStr }\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Modal, Form, Input, Select, message } from 'antd'\r\nimport { createLinkman } from '@/utils/index'\r\n\r\nexport default ({onClose}) => {\r\n\tconst [ form ] = Form.useForm()\r\n\r\n\tconst onSexChange = (value) => {\r\n\t\tconsole.log('%cindex.js line:8 value', 'color: #26bfa5;', value)\r\n\t\tform.setFieldsValue({ sex: value })\r\n\t}\r\n\r\n\tconst onHandleCreateLinkman = () => {\r\n\t\tform\r\n\t\t\t.validateFields()\r\n\t\t\t.then(async (values) => {\r\n\t\t\t\tconsole.log('%cindex.js line:13 values', 'color: #26bfa5;', values)\r\n        let result = await createLinkman({ ...values })\r\n        if(result.id){\r\n          message.success('添加成功')\r\n          onClose(result.id)\r\n        }\r\n\t\t\t\tconsole.log('%cindex.js line:17 result', 'color: #26bfa5;', result)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log('%cindex.js line:15 err', 'color: #26bfa5;', err)\r\n\t\t\t})\r\n\t}\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\twidth=\"600\"\r\n\t\t\tvisible={true}\r\n\t\t\ttitle=\"录入用户信息\"\r\n\t\t\twrapClassName=\"create-linkman-modal-body\"\r\n\t\t\tokText=\"确认\"\r\n\t\t\tcancelText=\"取消\"\r\n\t\t\tonOk={onHandleCreateLinkman}\r\n\t\t>\r\n\t\t\t<div className=\"create-linkman-body\">\r\n\t\t\t\t<Form form={form} labelCol={{ span: 4 }} wrapperCol={{ span: 14 }} onFinish={() => {}}>\r\n\t\t\t\t\t<Form.Item label=\"姓名\" name=\"name\" rules={[ { required: true, message: '请输入姓名' } ]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item label=\"电话\" name=\"tel\" rules={[ { required: true, message: '请输入手机号码' } ]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item label=\"性别\" name=\"sex\" rules={[ { required: true, message: '请选择性别' } ]}>\r\n\t\t\t\t\t\t<Select placeholder=\"请选择性别\" onChange={onSexChange}>\r\n\t\t\t\t\t\t\t<Select.Option key=\"male\" value=\"male\">\r\n\t\t\t\t\t\t\t\t男\r\n\t\t\t\t\t\t\t</Select.Option>\r\n\t\t\t\t\t\t\t<Select.Option key=\"female\" value=\"female\">\r\n\t\t\t\t\t\t\t\t女\r\n\t\t\t\t\t\t\t</Select.Option>\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Modal, Form, DatePicker, Select, Input, Button, message } from 'antd'\r\nimport { vehicleType } from '@/utils/string'\r\nimport { createCar, getMatchCar, getMatchLinkman } from '@/utils/index'\r\nimport Item from 'antd/lib/list/Item'\r\nimport CreateLinkmanModal from '@/components/CreateLinkmanModal'\r\nconst { Option } = Select\r\nexport default ({onClose}) => {\r\n\tconst [ form ] = Form.useForm()\r\n\tconst [ matchlinkmans, setMatchlinkmans ] = useState([])\r\n\tconst [ createLinkman, setCreateLinkman ] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst initData = async () => {\r\n\t\t\tlet result = await getMatchLinkman('')\r\n\t\t\tresult.data = result.data.map((linkman) => {\r\n\t\t\t\tlinkman.value = linkman.name + '/' + linkman.tel\r\n\t\t\t\treturn linkman\r\n\t\t\t})\r\n\t\t\tsetMatchlinkmans(result.data)\r\n\t\t}\r\n\t\tinitData()\r\n\t}, [createLinkman])\r\n\tconst onTypeChange = (value) => {\r\n\t\tform.setFieldsValue({ type: value })\r\n\t}\r\n\tconst onHandleCreateCar = async (value) => {\r\n\t\tform\r\n\t\t\t.validateFields()\r\n\t\t\t.then(async (values) => {\r\n\t\t\t\tconsole.log('%cindex.js line:14 values', 'color: #26bfa5;', values)\r\n        let result = await createCar({...values})\r\n        if(result.id){\r\n          message.success('添加车辆成功')\r\n          onClose(result.id)\r\n        }\r\n      })\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log('%cindex.js line:15 err', 'color: #26bfa5;', err)\r\n\t\t\t})\r\n\t\t// let result = await createCar(value)\r\n\t\t// console.log('%cindex.js line:13 result', 'color: #26bfa5;', result);\r\n\t}\r\n\tconst onLinkmansChange = async (value) => {\r\n\t\t// console.log('%cindex.js line:21 value', 'color: #26bfa5;', value);\r\n\t\t// let result = await getMatchLinkman(value)\r\n\t\t// console.log('%cindex.js line:23 result', 'color: #26bfa5;', result);\r\n\t\t// result.data = result.data.map(linkman => {\r\n\t\t//   linkman.value = linkman.name + '/' + linkman.tel\r\n\t\t//   return linkman\r\n\t\t// })\r\n\t\t// setMatchlinkmans(value)\r\n  }\r\n  const onCloseCreateLinkman = () => {\r\n    setCreateLinkman(false)\r\n\r\n  }\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\twidth=\"600\"\r\n\t\t\tvisible={true}\r\n\t\t\ttitle=\"录入车辆信息\"\r\n\t\t\twrapClassName=\"create-car-modal-body\"\r\n\t\t\tokText=\"确认\"\r\n\t\t\tcancelText=\"取消\"\r\n\t\t\tonOk={onHandleCreateCar}\r\n\t\t>\r\n\t\t\t<div className=\"create-car-body\">\r\n\t\t\t\t<Form form={form} labelCol={{ span: 4 }} wrapperCol={{ span: 14 }} onFinish={() => {}}>\r\n\t\t\t\t\t<Form.Item label=\"车牌号\" name=\"no\" rules={[ { required: true, message: '请输入车牌号码' } ]}>\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item label=\"验车时间\" name=\"check_date\" rules={[ { required: true, message: '请选择验车日期' } ]}>\r\n\t\t\t\t\t\t<DatePicker />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item label=\"车辆类型\" name=\"type\" rules={[ { required: true, message: '请选择车辆类型' } ]}>\r\n\t\t\t\t\t\t<Select onChange={onTypeChange} placeholder=\"请选择车辆类型\" allowClear>\r\n\t\t\t\t\t\t\t{vehicleType.map((item) => (\r\n\t\t\t\t\t\t\t\t<Select.Option key={item.type} value={item.type}>\r\n\t\t\t\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t\t\t\t\t<span>{item.title}</span>{' '}\r\n\t\t\t\t\t\t\t\t</Select.Option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item label=\"发动机号码\" name=\"engine_no\">\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item label=\"车架号码\" name=\"frame_no\">\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item label=\"品牌\" name=\"brand\">\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n          <Form.Item label=\"型号\" name=\"model\">\r\n\t\t\t\t\t\t<Input />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item label=\"联系人\" name=\"linkman_ids\">\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tmode=\"multiple\"\r\n\t\t\t\t\t\t\tonChange={onLinkmansChange}\r\n\t\t\t\t\t\t\toptionLabelProp=\"label\"\r\n\t\t\t\t\t\t\tfilterOption={async (inputValue, option) => {\r\n\t\t\t\t\t\t\t\tconsole.log('%cindex.js line:88 option.label', 'color: #26bfa5;', option.label)\r\n\t\t\t\t\t\t\t\treturn option.label.indexOf(inputValue) >= 0\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{matchlinkmans.map((linkman) => (\r\n\t\t\t\t\t\t\t\t<Option key={linkman._id} value={linkman._id} label={linkman.value}>\r\n\t\t\t\t\t\t\t\t\t<span key={linkman._id}>{linkman.value}</span>{' '}\r\n\t\t\t\t\t\t\t\t</Option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t\t{JSON.stringify(matchlinkmans)}\r\n\t\t\t\t<Button onClick={() => setCreateLinkman(true)}>添加用户</Button>\r\n\t\t\t\t{createLinkman && <CreateLinkmanModal onClose={(id)=>{\r\n          setCreateLinkman(false)\r\n          form.setFieldsValue({linkman_ids:[id]})\r\n          }}/>}\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n","import React, { useState, useEffect, Fragment } from 'react'\r\nimport moment from 'moment'\r\nimport {\r\n  Modal,\r\n  Steps,\r\n  AutoComplete,\r\n  Input,\r\n  Descriptions,\r\n  Button,\r\n  Form,\r\n  Select,\r\n  DatePicker,\r\n} from 'antd'\r\nimport { UserOutlined, SolutionOutlined, LoadingOutlined, SmileOutlined } from '@ant-design/icons'\r\nimport CreateCarModal from '@/components/CreateCarModal'\r\nimport { getMatchCar, getMatchLinkman, getCorporates ,createBill} from '@/utils/index'\r\nimport { billTypes } from '@/utils/string'\r\nimport './createBillModal.less'\r\nconst { Step } = Steps\r\n\r\nconst CreateBillModal = (props: any) => {\r\n  const [step, setStep] = useState(0) //  0 选择车辆,1 订单配置 , 2选择联系人,3 订单生成\r\n  const [carOptions, setCarOptions] = useState<{ value: string }[]>([])\r\n  const [linkmanOptions, setLinkmanOptions] = useState<{ value: string }[]>([])\r\n  const [car, setCar] = useState<any>({})\r\n\tconst [linkman, setLinkman] = useState<any>({})\r\n\tconst [billInfo, setBillInfo] = useState<any>({})\r\n  const [corporates, setCorporates] = useState<{ _id: string; name: string }[]>([])\r\n\r\n  const [createCar, setCreateCar] = useState(false);\r\n\r\n  const [form] = Form.useForm()\r\n\r\n  useEffect(() => {\r\n    const initData = async () => {\r\n      let result = await getCorporates({})\r\n      console.log('%ccreateBillModal.tsx line:34 result', 'color: #26bfa5;', result)\r\n      setCorporates(result.data)\r\n    }\r\n    initData()\r\n    return () => {}\r\n  }, [])\r\n\r\n  const onCarSelect = (e: any, option: any) => {\r\n    setCar(option)\r\n  }\r\n  const onLinkManSelect = (e: any, option: any) => {\r\n    setLinkman(option)\r\n  }\r\n  const onHandleCarSearch = async (e: any) => {\r\n    if (e === '') return\r\n    let result = await getMatchCar(String(e))\r\n    result.data = result.data.map((car: any) => {\r\n      car.value = `${car.no} / ${car.brand} / ${car.model}`\r\n      return car\r\n    })\r\n    setCarOptions(result.data)\r\n  }\r\n\r\n  const onHandleLinkmanSearch = async (e: any) => {\r\n\t\tif (e === '') return\r\n    let result = await getMatchLinkman(String(e))\r\n    result.data = result.data.map((linkman: any) => {\r\n      linkman.value = linkman.name + '/' + linkman.tel\r\n      return linkman\r\n    })\r\n    setLinkmanOptions(result.data)\r\n  }\r\n\r\n  const onFinish = (values: any) => {\r\n    console.log('%ccreateBillModal.tsx line:59 values', 'color: #26bfa5;', values)\r\n\t\tsetBillInfo(values)\r\n\t\tsetStep(2)\r\n\t}\r\n\t\r\n\tconst onCreateBill = () =>{\r\n\t//\tconsole.log('%ccreateBillModal.tsx line:78 car , billInfo, linkman', 'color: #26bfa5;', car , billInfo, linkman);\r\n\t\tlet tempBillInfo = {\r\n\t\t\tcar_id:car._id,\r\n\t\t\tcreate_date:new Date(),\r\n\t\t\texpire_date:billInfo.expire_date.format(),\r\n\t\t\tinsurancebrand_id:billInfo.corporate,\r\n\t\t\tlinkman_ids:[linkman._id],\r\n\t\t\tprice:billInfo.price,\r\n\t\t\ttype:billInfo.type,\r\n\t\t\tvalid_date:billInfo.valid_date.format()\r\n\t\t}\r\n    console.log('%ccreateBillModal.tsx line:90 tempBillInfo', 'color: #26bfa5;', tempBillInfo);\r\n    createBill(tempBillInfo)\r\n\t}\r\n  return (\r\n    <Modal\r\n      width=\"800\"\r\n      visible={true}\r\n      title=\"sssfsf\"\r\n      wrapClassName=\"create-bill-modal-body\"\r\n      onCancel={props.onClose}\r\n      footer={null}\r\n    >\r\n      <Steps current={step}>\r\n        <Step title=\"选择车辆\" icon={<UserOutlined />} />\r\n        <Step title=\"订单配置\" icon={<SolutionOutlined />} />\r\n        <Step title=\"选择联系人\" icon={<LoadingOutlined />} />\r\n        <Step title=\"订单完成\" icon={<SmileOutlined />} />\r\n      </Steps>\r\n      <div className=\"step-content\">\r\n        {step === 0 && (\r\n          <div>\r\n            <AutoComplete\r\n              dropdownMatchSelectWidth={252}\r\n              style={{ width: 300 }}\r\n              options={carOptions}\r\n              onSelect={onCarSelect}\r\n              onSearch={onHandleCarSearch}\r\n            >\r\n              <Input.Search size=\"middle\" placeholder=\"输入车牌号\" enterButton />\r\n              \r\n            </AutoComplete>\r\n            <Button onClick={()=>setCreateCar(true)}>新建</Button>\r\n              {createCar && <CreateCarModal onClose={()=>setCreateCar(false)}/>}\r\n            {car.no && (\r\n              <div className=\"car-info-container\">\r\n                <Descriptions column={2} title=\"车辆信息\">\r\n                  <Descriptions.Item label=\"车牌号\">{car.no}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"品牌\">{car.brand}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"型号\">{car.model}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"类型\">{car.type}</Descriptions.Item>\r\n                </Descriptions>\r\n                <Button type=\"primary\" onClick={() => setStep(1)}>\r\n                  下一步\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {step === 1 && (\r\n          <>\r\n            <Form\r\n              form={form}\r\n              labelCol={{ span: 4 }}\r\n              wrapperCol={{ span: 14 }}\r\n              layout=\"horizontal\"\r\n              initialValues={{ no: car.no }}\r\n              onFinish={onFinish}\r\n            >\r\n              <Form.Item label=\"车牌号码\" name=\"no\">\r\n                <Input disabled />\r\n              </Form.Item>\r\n              <Form.Item label=\"订单类型\" name=\"type\">\r\n                <Select>\r\n                  {billTypes.map((temp) => {\r\n                    return (\r\n                      <Select.Option key={temp.type} value={temp.type}>\r\n                        {temp.title}\r\n                      </Select.Option>\r\n                    )\r\n                  })}\r\n                </Select>\r\n              </Form.Item>\r\n              <Form.Item label=\"订单金额\" name=\"price\">\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item label=\"生效日期\" name=\"valid_date\">\r\n                <DatePicker />\r\n              </Form.Item>\r\n              <Form.Item label=\"失效日期\" name=\"expire_date\">\r\n                <DatePicker />\r\n              </Form.Item>\r\n              <Form.Item label=\"公司名称\" name=\"corporate\">\r\n                <Select>\r\n                  {corporates.map((temp) => {\r\n                    return (\r\n                      <Select.Option key={temp._id} value={temp._id}>\r\n                        {temp.name}\r\n                      </Select.Option>\r\n                    )\r\n                  })}\r\n                </Select>\r\n              </Form.Item>\r\n            </Form>\r\n            <Button type=\"primary\" onClick={(e) => form.submit()}>\r\n              下一步\r\n            </Button>\r\n          </>\r\n        )}\r\n        {step === 2 && (\r\n          <>\r\n            <h1>选择联系人</h1>\r\n            <AutoComplete\r\n              dropdownMatchSelectWidth={252}\r\n              style={{ width: 300 }}\r\n              options={linkmanOptions}\r\n              onSelect={onLinkManSelect}\r\n              onSearch={onHandleLinkmanSearch}\r\n            >\r\n              <Input.Search size=\"middle\" placeholder=\"输入姓名查询\" enterButton />\r\n            </AutoComplete>\r\n            <div>\r\n            <Button type=\"primary\" onClick={onCreateBill}>\r\n              完成\r\n            </Button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\nexport { CreateBillModal }\r\n","import { RouteProps } from 'react-router'\r\nimport { NoFoundPage, Home, Schedule } from '../pages'\r\n\r\nexport interface IRouteProps extends RouteProps {\r\n\tmenu?: boolean\r\n\ttitle?: string\r\n}\r\n\r\nexport const appRoutes: IRouteProps[] = [\r\n\t{\r\n\t\ttitle: 'Not found',\r\n\t\tpath: '/nf',\r\n\t\tcomponent: NoFoundPage\r\n\t},\r\n\t{\r\n\t\ttitle: '订单列表',\r\n\t\tpath: '/',\r\n\t\tcomponent: Home,\r\n\t\tmenu: true\r\n\t},\r\n\t{\r\n\t\ttitle: 'Schedule',\r\n\t\tpath: '/schedule',\r\n\t\tcomponent: Schedule,\r\n\t\tmenu: true\r\n\t},\r\n\t{\r\n\t\tpath: '**',\r\n\t\tcomponent: NoFoundPage\r\n\t}\r\n]\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Table, Drawer, Button, Row, Col, Descriptions, Badge, PageHeader } from 'antd'\r\nimport { useHistory } from 'react-router'\r\nimport { loginState, getBills } from '@/utils/index'\r\nimport { billTypes, vehicleType, billTypeTitle } from '@/utils/string'\r\nimport { dateStr } from '@/utils/date'\r\nimport { CreateBillModal } from './components/createBillModal'\r\n\r\nexport const Home: React.FC<{}> = () => {\r\n\tconst [logState, setLogState] = useState(true as any) //\r\n\tconst [createBillModalVisible, setCreateBillModalVisible] = useState(false)\r\n\tconst history = useHistory()\r\n\tconst [bs, setBs] = useState([] as any[]) // 订单列表\r\n\tconst [billDetailVisible, setBillDetailVisible] = useState(false)\r\n\tconst [detailItem, setDetailItem] = useState({} as any)\r\n\r\n\tuseEffect(() => {\r\n\t\tconst getState = async () => {\r\n\t\t\tlet tstate = await loginState()\r\n\t\t\tsetLogState(tstate)\r\n\t\t\tif (!tstate) history.push('/login')\r\n\t\t}\r\n\t\tgetState()\r\n\t\tconst fetchBill = async () => {\r\n\t\t\tlet data = (await getBills({})) || {}\r\n\t\t\tconsole.log('%cerror data line:22 ', 'color: red; display: block; width: 100%;', data)\r\n\t\t\tsetBs(data)\r\n\t\t}\r\n\t\tfetchBill()\r\n\t}, [])\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: '车牌号',\r\n\t\t\tdataIndex: '_id',\r\n\t\t\tkey: '_id',\r\n\t\t\trender: (text: any, record: any, index: any) => {\r\n\t\t\t\treturn <p key={index}>{record.car_info.no}</p>\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '订单类型',\r\n\t\t\tdataIndex: 'type',\r\n\t\t\tkey: 'type',\r\n\t\t\trender: (text: any, record: any) => {\r\n\t\t\t\tlet types = billTypeTitle(record.type)\r\n\t\t\t\treturn <p>{types.title}</p>\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '订单金额',\r\n\t\t\tdataIndex: 'price',\r\n\t\t\tkey: 'm'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '联系人',\r\n\t\t\tdataIndex: 'ms',\r\n\t\t\tkey: 'ms',\r\n\t\t\trender: (text: any, record: any, index: any) => {\r\n\t\t\t\tif (!record.linkmans.length) {\r\n\t\t\t\t\treturn <p key={index}>-</p>\r\n\t\t\t\t}\r\n\t\t\t\treturn <p key={index}>{record.linkmans[0].name}</p>\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '操作',\r\n\t\t\tkey: 'opt',\r\n\t\t\tdataIndex: 'opt',\r\n\t\t\trender: (text: any, record: any, index: any) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\ttype=\"link\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetDetailItem(record)\r\n\t\t\t\t\t\t\tsetBillDetailVisible(!billDetailVisible)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t详情\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n\tconst DetailItme = () => {\r\n\t\tconsole.log('%cHome.tsx line:87 detailItem', 'color: #26bfa5;', detailItem);\r\n\t\tlet typeTitle = billTypeTitle(detailItem.type).title\r\n\t\tlet linkmanName = detailItem.linkmans.length ? detailItem.linkmans[0].name : '--'\r\n\t\tlet linkmanTel = detailItem.linkmans.length ? detailItem.linkmans[0].tel : '--'\r\n\t\treturn (\r\n\t\t\t<Descriptions column={3} title=\"订单详情\" layout=\"vertical\" bordered>\r\n\t\t\t\t<Descriptions.Item label=\"车牌号码\" span={1}>\r\n\t\t\t\t\t{detailItem.car_info.no}\r\n\t\t\t\t</Descriptions.Item>\r\n\t\t\t\t<Descriptions.Item label=\"订单类型\">{typeTitle}</Descriptions.Item>\r\n\t\t\t\t<Descriptions.Item label=\"订单金额\">{detailItem.price}</Descriptions.Item>\r\n\t\t\t\t<Descriptions.Item label=\"联系人\">{linkmanName}</Descriptions.Item>\r\n\t\t\t\t<Descriptions.Item label=\"联系人电话\" span={1}>\r\n\t\t\t\t\t{linkmanTel}\r\n\t\t\t\t</Descriptions.Item>\r\n\t\t\t\t<Descriptions.Item label=\"成交时间\">{dateStr(detailItem.create_date)}</Descriptions.Item>\r\n\t\t\t\t<Descriptions.Item label=\"过期时间\">{dateStr(detailItem.expire_date)}</Descriptions.Item>\r\n\t\t\t\t<Descriptions.Item label=\"车辆状态\">\r\n\t\t\t\t\t<Badge status=\"processing\" text=\"Running\" />\r\n\t\t\t\t</Descriptions.Item>\r\n\t\t\t\t<Descriptions.Item label=\"订单金额\">$80.00</Descriptions.Item>\r\n\t\t\t\t<Descriptions.Item label=\"Discount\">$20.00</Descriptions.Item>\r\n\t\t\t\t<Descriptions.Item label=\"Official Receipts\">$60.00</Descriptions.Item>\r\n\t\t\t\t<Descriptions.Item label=\"Config Info\">\r\n\t\t\t\t\tData disk type: MongoDB\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\tDatabase version: 3.4\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\tPackage: dds.mongo.mid\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\tStorage space: 10 GB\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\tReplication factor: 3\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\tRegion: East China 1<br />\r\n\t\t\t\t</Descriptions.Item>\r\n\t\t\t</Descriptions>\r\n\t\t)\r\n\t}\r\n\tconst onCloseDetail = () => {\r\n\t\tsetBillDetailVisible(false)\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<PageHeader onBack={() => null} title=\"订单列表\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetCreateBillModalVisible(true)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t新建订单\r\n\t\t\t\t</Button>\r\n\t\t\t</PageHeader>\r\n\t\t\t<Table rowKey={(record) => record._id} columns={columns} dataSource={bs} />\r\n\t\t\t<Drawer maskClosable width={650} closable={false} onClose={onCloseDetail} visible={billDetailVisible}>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t<DetailItme />\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Drawer>\r\n\t\t\t{createBillModalVisible && <CreateBillModal onClose={() => setCreateBillModalVisible(false)} />}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Drawer } from 'antd'\r\n\r\nexport const Schedule: React.FC<{}> = () => {\r\n\treturn <div />\r\n}\r\n","import React from 'react'\r\nimport { Switch, Route, RouteProps } from 'react-router-dom'\r\nimport { appRoutes } from './config'\r\nexport * from './config'\r\n\r\nfunction SwitchRoutes(appRoutes: RouteProps[]) {\r\n  return (\r\n    <Switch>\r\n      {appRoutes.map((route, index) => (\r\n        <Route\r\n          key={index}\r\n          path={route.path}\r\n          component={route.component}\r\n          exact={route.exact || true}\r\n          strict={route.strict || false}\r\n        />\r\n      ))}\r\n    </Switch>\r\n  )\r\n}\r\n\r\nexport function RenderRoutes() {\r\n  return SwitchRoutes(appRoutes)\r\n}\r\n","import React from 'react'\r\nimport { Layout, Menu, Card, Avatar } from 'antd'\r\nimport { useHistory } from 'react-router'\r\nimport { IRouteProps } from '@/routes/config'\r\nimport { config } from '@/config'\r\nimport './index.less'\r\n\r\nconst { Sider, Header, Content, Footer } = Layout\r\n\r\nexport interface ILayoutProps {\r\n\tmenus: IRouteProps[]\r\n}\r\n\r\nexport function MainLayout(props: React.PropsWithChildren<ILayoutProps>) {\r\n\tconst history = useHistory()\r\n\tconst { menus } = props\r\n\r\n\tconst year = new Date().getFullYear()\r\n\r\n\t// if (!auth.hasLoginState()) {\r\n\t// \thistory.push('/')\r\n\t// }\r\n\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<Layout style={{ height: '100%' }}>\r\n\t\t\t\t<Header className=\"header flex\">\r\n\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t<Avatar style={{ height: '40px', width: '40px' }} src={`${config.storageBaseUrl}/icon.png`} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"home\">\r\n\t\t\t\t\t\t<a href=\"/home\">Home</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Header>\r\n\t\t\t\t<Content style={{ padding: '0 50px', display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t\t<Layout style={{ padding: '24px 0', flex: '1 1 auto', background: '#fff' }}>\r\n\t\t\t\t\t\t<Sider\r\n\t\t\t\t\t\t\twidth={200}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackground: '#fff'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Menu\r\n\t\t\t\t\t\t\t\tmode=\"inline\"\r\n\t\t\t\t\t\t\t\tonSelect={({ key }) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(key as string)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{menus.map((menu) => (\r\n\t\t\t\t\t\t\t\t\t<Menu.Item key={menu.path as string}>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"nav-text\">{menu.title}</span>\r\n\t\t\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Menu>\r\n\t\t\t\t\t\t</Sider>\r\n\t\t\t\t\t\t<Content style={{ padding: '0 24px' }}>\r\n\t\t\t\t\t\t\t<Card className=\"card\" bordered={false}>\r\n\t\t\t\t\t\t\t\t<div className=\"card-content\" style={{ overflow: 'auto' }}>\r\n\t\t\t\t\t\t\t\t\t{props.children}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t</Content>\r\n\t\t\t\t\t</Layout>\r\n\t\t\t\t</Content>\r\n\t\t\t\t<Footer className=\"footer\" style={{ textAlign: 'center' }}>\r\n\t\t\t\t\tCopyright &copy; 腾讯云 - 云开发 2018 - {year}\r\n\t\t\t\t</Footer>\r\n\t\t\t</Layout>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\r\nimport { RenderRoutes, appRoutes } from './routes'\r\nimport { MainLayout } from './layout'\r\nimport { Login } from './pages'\r\nimport 'antd/dist/antd.css'\r\nimport './App.less'\r\n\r\nconst menus = appRoutes.filter((item) => item.menu)\r\n\r\nfunction App() {\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t{/* <MainLayout menus={menus}>{RenderRoutes()}</MainLayout> */}\r\n\t\t\t{/* {RenderRoutes()} */}\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route key=\"login\" path=\"/login\" component={Login} exact />\r\n\t\t\t\t<MainLayout menus={menus}>{RenderRoutes()}</MainLayout>\r\n\t\t\t</Switch>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default () => {\r\n\treturn (\r\n\t\t<BrowserRouter>\r\n\t\t\t<App />\r\n\t\t</BrowserRouter>\r\n\t)\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as online.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport * as serviceWorker from './serviceWorker'\r\nimport './index.less'\r\n\r\ndeclare global {\r\n  interface Window {\r\n    tcb: any\r\n  }\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister()\r\n"],"sourceRoot":""}